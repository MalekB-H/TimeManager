(function(){"use strict";var e={9403:function(e,t,r){var o=r(5130),a=r(6768);const n={id:"app",class:"bg-gray-100 min-h-screen"},s={key:0,class:"bg-white shadow-md"},l={class:"container mx-auto px-4"},i={class:"flex space-x-4 py-3"},d={class:"container mx-auto px-4 py-8"};function u(e,t,r,o,u,c){const m=(0,a.g2)("router-link"),g=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",n,[t[4]||(t[4]=(0,a.Lk)("header",{class:"bg-blue-600 text-white p-4 shadow-md"},[(0,a.Lk)("h1",{class:"text-2xl font-bold"},"Dashboard des employées")],-1)),u.isLoggedIn?((0,a.uX)(),(0,a.CE)("nav",s,[(0,a.Lk)("div",l,[(0,a.Lk)("ul",i,[(0,a.Lk)("li",null,[(0,a.bF)(m,{to:"/",class:"text-blue-600 hover:text-blue-800"},{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.eW)("Dashboard")]))),_:1})]),(0,a.Lk)("li",null,[(0,a.bF)(m,{to:"/working-times",class:"text-blue-600 hover:text-blue-800"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.eW)("Temps de travail")]))),_:1})]),(0,a.Lk)("li",null,[(0,a.bF)(m,{to:"/clock-manager",class:"text-blue-600 hover:text-blue-800"},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.eW)("Gestion du pointeur")]))),_:1})]),(0,a.Lk)("li",null,[(0,a.Lk)("a",{onClick:t[0]||(t[0]=(...e)=>c.logout&&c.logout(...e)),href:"#",class:"text-blue-600 hover:text-blue-800"},"Déconnexion")])])])])):(0,a.Q3)("",!0),(0,a.Lk)("main",d,[(0,a.bF)(g)])])}r(4114);var c=r(4373);const m="http://localhost:4000/api/";class g{async login(e,t){const r=await c.A.post(m+"login",{email:e,password:t});return r.data.jwt&&localStorage.setItem("user",JSON.stringify(r.data)),r.data}logout(){localStorage.removeItem("user")}async register(e,t,r){return c.A.post("http://localhost:4000/api/register",{user:{username:e,email:t,password:r}})}getCurrentUser(){return JSON.parse(localStorage.getItem("user"))}}var p=new g,k={name:"App",data(){return{isLoggedIn:!1}},created(){this.isLoggedIn=!!localStorage.getItem("user")},methods:{logout(){p.logout(),this.isLoggedIn=!1,this.$router.push("/login")}},watch:{$route(){this.isLoggedIn=!!localStorage.getItem("user")}}},h=r(1241);const b=(0,h.A)(k,[["render",u]]);var v=b,w=r(1387),f=r(4232);const y={key:0,class:"bg-white p-6 rounded-lg shadow-md mb-6"},x={key:1,class:"text-gray-600"},L={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-6"};function D(e,t,r,o,n,s){const l=(0,a.g2)("EmployeeSelector"),i=(0,a.g2)("WorkingTimeChart"),d=(0,a.g2)("WorkingTimeSelector"),u=(0,a.g2)("ClockingHistory"),c=(0,a.g2)("WorkingHoursChart"),m=(0,a.g2)("UserPerformance");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(l,{onEmployeeSelected:o.setSelectedEmployee},null,8,["onEmployeeSelected"]),o.selectedEmployee?((0,a.uX)(),(0,a.CE)("div",y,[t[3]||(t[3]=(0,a.Lk)("h2",{class:"text-xl font-semibold mb-4"},"Information de l'employé",-1)),(0,a.Lk)("p",null,[t[0]||(t[0]=(0,a.Lk)("strong",null,"Nom:",-1)),(0,a.eW)(" "+(0,f.v_)(o.selectedEmployee.username),1)]),(0,a.Lk)("p",null,[t[1]||(t[1]=(0,a.Lk)("strong",null,"ID:",-1)),(0,a.eW)(" "+(0,f.v_)(o.selectedEmployee.id),1)]),(0,a.Lk)("p",null,[t[2]||(t[2]=(0,a.Lk)("strong",null,"Email:",-1)),(0,a.eW)(" "+(0,f.v_)(o.selectedEmployee.email),1)])])):((0,a.uX)(),(0,a.CE)("p",x,"Veuillez sélectionner un employé pour voir ses informations.")),o.selectedEmployee?((0,a.uX)(),(0,a.CE)("div",L,[(0,a.bF)(i,{userId:o.selectedEmployee.id},null,8,["userId"]),(0,a.bF)(d,{userId:o.selectedEmployee.id},null,8,["userId"]),(0,a.bF)(u,{userId:o.selectedEmployee.id},null,8,["userId"]),(0,a.bF)(c,{userId:o.selectedEmployee.id},null,8,["userId"]),(0,a.bF)(m,{userId:o.selectedEmployee.id},null,8,["userId"])])):(0,a.Q3)("",!0)])}var I=r(144);const S={class:"mb-6"},E=["value"],C={key:0,class:"mt-2 text-sm text-red-600"};function T(e,t,r,n,s,l){return(0,a.uX)(),(0,a.CE)("div",S,[t[3]||(t[3]=(0,a.Lk)("label",{for:"employee-select",class:"block text-sm font-medium text-gray-700 mb-2"},"Sélectionner un employé",-1)),(0,a.bo)((0,a.Lk)("select",{id:"employee-select","onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedEmployeeId=e),onChange:t[1]||(t[1]=(...e)=>n.selectEmployee&&n.selectEmployee(...e)),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[t[2]||(t[2]=(0,a.Lk)("option",{value:""},"Sélectionner un employé",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.employees,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,f.v_)(e.username||e.email||`Employee ${e.id}`),9,E)))),128))],544),[[o.u1,n.selectedEmployeeId]]),n.error?((0,a.uX)(),(0,a.CE)("p",C,(0,f.v_)(n.error),1)):(0,a.Q3)("",!0)])}const _="http://localhost:4000/api";var A={searchUsers(e,t){return c.A.get(`${_}/users`,{params:{...e&&{email:e},...t&&{username:t}}})},getUser(e){return c.A.get(`${_}/users/${e}`)},getWorkingTime(e,t){return c.A.get(`${_}/working_times/${e}/${t}`)},getWorkingTimes(e,t,r){return c.A.get(`${_}/working_times/${e}`,{params:{...t&&{start:t},...r&&{end:r}}})},postWorkingTimes(e,t,r){return c.A.post(`${_}/working_times/${e}`,{working_time:{start_time:t,end_time:r,user_id:e}})},getClockings(e){return c.A.get(`${_}/clockings/${e}`)}},W={name:"EmployeeSelector",emits:["employee-selected"],setup(e,{emit:t}){const r=(0,I.KR)([]),o=(0,I.KR)(""),n=(0,I.KR)(""),s=async()=>{try{const e=await A.searchUsers();if(console.log("Réponse API:",e),!e.data||!Array.isArray(e.data.data))throw new Error("Unexpected response format");r.value=e.data.data,n.value=""}catch(e){console.error("Error fetching employees:",e),n.value="Failed to load employees. Please try again.",r.value=[]}},l=()=>{if(!o.value)return void t("employee-selected",null);const e=r.value.find((e=>e.id==o.value));e?t("employee-selected",e):(console.error("Selected employee not found"),n.value="Error selecting employee. Please try again.")};return(0,a.sV)(s),{employees:r,selectedEmployeeId:o,selectEmployee:l,error:n}}};const R=(0,h.A)(W,[["render",T]]);var O=R;const P={class:"bg-white p-6 rounded-lg shadow-md"},$={class:"chart-container"},V={key:0};function X(e,t,r,o,n,s){const l=(0,a.g2)("DateRangeSelector"),i=(0,a.g2)("Bar");return(0,a.uX)(),(0,a.CE)("div",P,[t[0]||(t[0]=(0,a.Lk)("h2",{class:"text-xl font-semibold mb-4"},"Répartition du temps de travail",-1)),(0,a.bF)(l,{onDateRangeChanged:o.updateDateRange},null,8,["onDateRangeChanged"]),(0,a.Lk)("div",$,[o.chartData?((0,a.uX)(),(0,a.Wv)(i,{key:0,data:o.chartData,options:o.chartOptions},null,8,["data","options"])):(0,a.Q3)("",!0)]),o.chartData?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("p",V,"Pas de données"))])}var M=r(1010),K=r(6912);const F={class:"mb-4"},U={class:"flex space-x-4"};function J(e,t,r,n,s,l){return(0,a.uX)(),(0,a.CE)("div",F,[t[4]||(t[4]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sélectionner une période",-1)),(0,a.Lk)("div",U,[(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>n.startDate=e),onChange:t[1]||(t[1]=(...e)=>n.emitDates&&n.emitDates(...e)),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},null,544),[[o.Jo,n.startDate]]),(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>n.endDate=e),onChange:t[3]||(t[3]=(...e)=>n.emitDates&&n.emitDates(...e)),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},null,544),[[o.Jo,n.endDate]])])])}var j={name:"DateRangeSelector",emits:["date-range-changed"],setup(e,{emit:t}){const r=(0,I.KR)(new Date((new Date).setDate((new Date).getDate()-7)).toISOString().split("T")[0]),o=(0,I.KR)((new Date).toISOString().split("T")[0]),n=()=>{t("date-range-changed",{startDate:r.value,endDate:o.value})};return(0,a.wB)([r,o],n),{startDate:r,endDate:o,emitDates:n}}};const H=(0,h.A)(j,[["render",J]]);var B=H;K.t1.register(K.hE,K.m_,K.s$,K.E8,K.PP,K.kc);var q={name:"WorkingTimeChart",components:{Bar:M.yP,DateRangeSelector:B},props:["userId"],setup(e){const t=(0,I.KR)(null),r=(0,I.KR)({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Heure"}}}}),o=(0,I.KR)(new Date((new Date).setDate((new Date).getDate()-7)).toISOString()),n=(0,I.KR)((new Date).toISOString()),s=async()=>{if(e.userId)try{const r=await A.getWorkingTimes(e.userId,o.value,n.value);console.log("Working times response:",r);let a=r.data.data;const s=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],l=Array(7).fill(0);a.forEach((e=>{const t=new Date(e.start_time),r=new Date(e.end_time),o=t.getDay(),a=(r-t)/36e5;l[o]+=a})),t.value={labels:s,datasets:[{label:"Heures travaillées",data:l,backgroundColor:"rgba(54, 162, 235, 0.6)"}]}}catch(r){console.error("Error fetching working times:",r)}},l=e=>{o.value=new Date(e.startDate).toISOString(),n.value=new Date(e.endDate).toISOString(),s()};return(0,a.wB)((()=>e.userId),s),(0,a.sV)(s),{chartData:t,chartOptions:r,updateDateRange:l}}};const Y=(0,h.A)(q,[["render",X],["__scopeId","data-v-6b035aec"]]);var N=Y;const Q={class:"bg-white p-6 rounded-lg shadow-md"},z={class:"z-10 bg-white rounded-lg shadow w-auto dark:bg-gray-700 p-3"},Z={class:"max-w-[16rem] mx-auto grid grid-cols-2 gap-4 mb-2"};function G(e,t,r,n,s,l){return(0,a.uX)(),(0,a.CE)("div",Q,[t[7]||(t[7]=(0,a.Lk)("h2",{class:"text-xl font-semibold mb-4"},"Sélection du temps de travail",-1)),(0,a.Lk)("button",{ref:"dropdownTimepickerButton",onClick:t[0]||(t[0]=(...e)=>l.toggleDropdown&&l.toggleDropdown(...e)),class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},t[4]||(t[4]=[(0,a.eW)(" Choose time "),(0,a.Lk)("svg",{class:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},[(0,a.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"})],-1)]),512),(0,a.bo)((0,a.Lk)("div",z,[(0,a.Lk)("div",Z,[(0,a.Lk)("div",null,[t[5]||(t[5]=(0,a.Lk)("label",{for:"start-time",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Start time:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"time",id:"start-time","onUpdate:modelValue":t[1]||(t[1]=e=>s.startTime=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:text-white",min:"09:00",max:"18:00",required:""},null,512),[[o.Jo,s.startTime]])]),(0,a.Lk)("div",null,[t[6]||(t[6]=(0,a.Lk)("label",{for:"end-time",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"End time:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"time",id:"end-time","onUpdate:modelValue":t[2]||(t[2]=e=>s.endTime=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:text-white",min:"09:00",max:"18:00",required:""},null,512),[[o.Jo,s.endTime]])])]),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.saveTime&&l.saveTime(...e)),type:"button",class:"text-blue-700 dark:text-blue-500 text-sm hover:underline p-0"}," Save time ")],512),[[o.aG,s.dropdownVisible]])])}var ee={name:"WorkingTimeSelector",props:["userId"],data(){return{dropdownVisible:!1,startTime:"00:00",endTime:"00:00"}},methods:{toggleDropdown(){this.dropdownVisible=!this.dropdownVisible},async saveTime(){console.log("Start time:",this.startTime,"End time:",this.endTime);const e=(new Date).toISOString().split("T")[0],t=`${e}T${this.startTime}:00Z`,r=`${e}T${this.endTime}:00Z`;try{await A.postWorkingTimes(this.userId,t,r),console.log("Working time saved successfully")}catch(o){console.error("Error saving working time",o)}this.dropdownVisible=!1}}};const te=(0,h.A)(ee,[["render",G],["__scopeId","data-v-c03afbcc"]]);var re=te;const oe={class:"bg-white p-6 rounded-lg shadow-md"},ae={key:0,class:"space-y-2"},ne={class:"text-gray-600"},se={key:1};function le(e,t,r,o,n,s){return(0,a.uX)(),(0,a.CE)("div",oe,[t[0]||(t[0]=(0,a.Lk)("h2",{class:"text-xl font-semibold mb-4"},"Historique de pointage",-1)),o.recentClockings.length?((0,a.uX)(),(0,a.CE)("ul",ae,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.recentClockings,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id,class:"flex justify-between items-center"},[(0,a.Lk)("span",null,(0,f.v_)(e.status),1),(0,a.Lk)("span",ne,(0,f.v_)(o.formatDate(e.time)),1)])))),128))])):((0,a.uX)(),(0,a.CE)("p",se,"Pas d'entrée valable"))])}var ie={name:"ClockingHistory",props:["userId"],setup(e){const t=(0,I.KR)([]),r=async()=>{if(e.userId)try{const r=await A.getClockings(e.userId);console.log("Réponse de pointage",r),r.data&&r.data.data?t.value=r.data.data.slice(0,5):Array.isArray(r.data)?t.value=r.data.slice(0,5):(console.error("Pas la bonne entrée de données:",r.data),t.value=[])}catch(r){console.error("Erreur du fetch:",r),t.value=[]}},o=e=>new Date(e).toLocaleString();return(0,a.sV)(r),(0,a.wB)((()=>e.userId),r),{recentClockings:t,formatDate:o}}};const de=(0,h.A)(ie,[["render",le]]);var ue=de;const ce={class:"bg-white p-6 rounded-lg shadow-md"},me={class:"mb-4"},ge={class:"chart-container"},pe={key:0};function ke(e,t,r,n,s,l){const i=(0,a.g2)("Bar");return(0,a.uX)(),(0,a.CE)("div",ce,[t[4]||(t[4]=(0,a.Lk)("h2",{class:"text-xl font-semibold mb-4"},"Heure de travail",-1)),(0,a.Lk)("div",me,[t[3]||(t[3]=(0,a.Lk)("label",{for:"period-select",class:"block text-sm font-medium text-gray-700 mb-2"},"Sélectionner une Période",-1)),(0,a.bo)((0,a.Lk)("select",{id:"period-select","onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedPeriod=e),onChange:t[1]||(t[1]=(...e)=>n.fetchData&&n.fetchData(...e)),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},t[2]||(t[2]=[(0,a.Lk)("option",{value:"week"},"Semaine",-1),(0,a.Lk)("option",{value:"month"},"MOis",-1),(0,a.Lk)("option",{value:"year"},"Année",-1)]),544),[[o.u1,n.selectedPeriod]])]),(0,a.Lk)("div",ge,[n.chartData?((0,a.uX)(),(0,a.Wv)(i,{key:0,data:n.chartData,options:n.chartOptions},null,8,["data","options"])):(0,a.Q3)("",!0)]),n.chartData?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("p",pe,"Pas de données valide"))])}K.t1.register(K.hE,K.m_,K.s$,K.E8,K.PP,K.kc);var he={name:"WorkingHoursChart",components:{Bar:M.yP},props:["userId"],setup(e){const t=(0,I.KR)(null),r=(0,I.KR)({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Heures"}}}}),o=(0,I.KR)("week"),n=async()=>{if(e.userId)try{const r=new Date;let a=new Date,n=[];switch(o.value){case"week":a.setDate(r.getDate()-7),n=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"];break;case"month":a.setMonth(r.getMonth()-1),n=Array.from({length:31},((e,t)=>t+1));break;case"year":a.setFullYear(r.getFullYear()-1),n=["Jan","Fev","Mar","Apr","Mai","Jun","Jul","Aou","Sep","Oct","Nov","Dec"];break}const s=await A.getWorkingTimes(e.userId,a.toISOString(),r.toISOString());console.log("Working hours response:",s);let l=s.data.data;const i=n.map((()=>0));l.forEach((e=>{const t=new Date(e.start_time),r=new Date(e.end_time),a=(r-t)/36e5;let n;switch(o.value){case"week":n=t.getDay()-1,-1===n&&(n=6);break;case"month":n=t.getDate()-1;break;case"year":n=t.getMonth();break}i[n]+=a})),t.value={labels:n,datasets:[{label:"Heures travaillées",data:i,backgroundColor:"rgba(75, 192, 192, 0.6)"}]}}catch(r){console.error("Error fetching working times:",r)}};return(0,a.wB)((()=>e.userId),n),(0,a.wB)((()=>o.value),n),(0,a.sV)(n),{chartData:t,chartOptions:r,selectedPeriod:o,fetchData:n}}};const be=(0,h.A)(he,[["render",ke],["__scopeId","data-v-3554dde2"]]);var ve=be;const we={class:"bg-white p-6 rounded-lg shadow-md"},fe={class:"flex items-center justify-between mb-2"},ye={class:"w-2/3 bg-gray-200 rounded-full h-2.5"},xe={class:"flex items-center justify-between"},Le={class:"w-2/3 bg-gray-200 rounded-full h-2.5"},De={class:"mt-4"};function Ie(e,t,r,o,n,s){return(0,a.uX)(),(0,a.CE)("div",we,[t[2]||(t[2]=(0,a.Lk)("h2",{class:"text-xl font-semibold mb-4"},"Performance de l'employé",-1)),(0,a.Lk)("div",fe,[t[0]||(t[0]=(0,a.Lk)("span",null,"Productivité",-1)),(0,a.Lk)("div",ye,[(0,a.Lk)("div",{class:"bg-blue-600 h-2.5 rounded-full",style:(0,f.Tr)({width:o.productivityPercentage+"%"})},null,4)])]),(0,a.Lk)("div",xe,[t[1]||(t[1]=(0,a.Lk)("span",null,"Heures travaillées",-1)),(0,a.Lk)("div",Le,[(0,a.Lk)("div",{class:"bg-green-500 h-2.5 rounded-full",style:(0,f.Tr)({width:o.hoursWorkedPercentage+"%"})},null,4)])]),(0,a.Lk)("div",De,[(0,a.Lk)("p",null,"Total des heures travaillées: "+(0,f.v_)(o.totalHoursWorked.toFixed(2)),1),(0,a.Lk)("p",null,"Moyenne d'heures par jour: "+(0,f.v_)(o.averageHoursPerDay.toFixed(2)),1)])])}r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698);var Se={name:"UserPerformance",props:["userId"],setup(e){const t=(0,I.KR)(0),r=(0,I.KR)(0),o=(0,I.KR)(0),n=(0,I.KR)(0),s=async()=>{if(e.userId)try{const a=new Date,s=new Date;s.setDate(a.getDate()-30);const l=await A.getWorkingTimes(e.userId,s.toISOString(),a.toISOString()),i=l.data.data;o.value=i.reduce(((e,t)=>{const r=new Date(t.start_time),o=new Date(t.end_time);return e+(o-r)/36e5}),0);const d=new Set(i.map((e=>new Date(e.start_time).toDateString()))).size;n.value=o.value/d;const u=8,c=d*u;t.value=Math.min(o.value/c*100,100),r.value=n.value/u*100}catch(a){console.error("Error fetching performance data:",a)}};return(0,a.wB)((()=>e.userId),s),(0,a.sV)(s),{productivityPercentage:t,hoursWorkedPercentage:r,totalHoursWorked:o,averageHoursPerDay:n}}};const Ee=(0,h.A)(Se,[["render",Ie]]);var Ce=Ee,Te={name:"DashboardView",components:{EmployeeSelector:O,WorkingTimeChart:N,WorkingTimeSelector:re,ClockingHistory:ue,WorkingHoursChart:ve,UserPerformance:Ce},setup(){const e=(0,I.KR)(null),t=(0,I.KR)(null),r=(0,I.KR)(null),o=(0,I.KR)(null),a=t=>{e.value=t,console.log("Selected employee:",t)},n=()=>{t.value.fetchData(),r.value.fetchData(),o.value.fetchPerformanceData()};return{selectedEmployee:e,setSelectedEmployee:a,refreshCharts:n,workingTimeChart:t,workingHoursChart:r,userPerformance:o}}};const _e=(0,h.A)(Te,[["render",D]]);var Ae=_e;function We(e,t,r,n,s,l){return(0,a.uX)(),(0,a.CE)("div",null,[t[4]||(t[4]=(0,a.Lk)("h2",null,"Manage Working Time",-1)),(0,a.Lk)("form",{onSubmit:t[2]||(t[2]=(0,o.D$)(((...e)=>l.saveWorkingTime&&l.saveWorkingTime(...e)),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.workingTime.start=e),placeholder:"Start time (YYYY-MM-DD hh:mm:ss)"},null,512),[[o.Jo,s.workingTime.start]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.workingTime.end=e),placeholder:"End time (YYYY-MM-DD hh:mm:ss)"},null,512),[[o.Jo,s.workingTime.end]]),t[3]||(t[3]=(0,a.Lk)("button",{type:"submit"},"Save Working Time",-1))],32)])}var Re={name:"WorkingTime",props:["userId","workingTimeId"],data(){return{workingTime:{start:"",end:""}}},methods:{async saveWorkingTime(){try{this.workingTimeId?await c.A.put(`/api/working_times/${this.userId}/${this.workingTimeId}`,{start_time:this.workingTime.start,end_time:this.workingTime.end}):await c.A.post(`/api/working_times/${this.userId}`,{start_time:this.workingTime.start,end_time:this.workingTime.end})}catch(e){console.error("Error saving working time",e)}},async deleteWorkingTime(){try{await c.A.delete(`/api/working_times/${this.userId}/${this.workingTimeId}`)}catch(e){console.error("Error deleting working time",e)}}},mounted(){this.workingTimeId&&this.getWorkingTime()}};const Oe=(0,h.A)(Re,[["render",We]]);var Pe=Oe;function $e(e,t,r,o,n,s){return(0,a.uX)(),(0,a.CE)("div",null,[t[1]||(t[1]=(0,a.Lk)("h2",null,"Clock Manager",-1)),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.toggleClock&&s.toggleClock(...e))},(0,f.v_)(n.clockIn?"Clock Out":"Clock In"),1),(0,a.Lk)("p",null,(0,f.v_)(n.clockIn?"Working period in progress.":"No working period in progress."),1)])}var Ve={name:"ClockManager",props:["userId"],data(){return{clockIn:!1,startDateTime:null}},methods:{async toggleClock(){if(this.clockIn)try{await c.A.post(`/api/clockings/${this.userId}`,{start_time:this.startDateTime,end_time:(new Date).toISOString()}),this.clockIn=!1,this.startDateTime=null}catch(e){console.error("Error clocking out",e)}else this.startDateTime=(new Date).toISOString(),this.clockIn=!0}}};const Xe=(0,h.A)(Ve,[["render",$e]]);var Me=Xe;const Ke={class:"max-w-md mx-auto mt-10 bg-white p-8 border rounded-lg shadow-lg"},Fe={class:"mb-4"},Ue={class:"mb-6"},Je={class:"mt-4 text-center"};function je(e,t,r,n,s,l){const i=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",Ke,[t[8]||(t[8]=(0,a.Lk)("h2",{class:"text-2xl font-bold mb-6 text-center"},"Connexion",-1)),(0,a.Lk)("form",{onSubmit:t[2]||(t[2]=(0,o.D$)(((...e)=>l.handleLogin&&l.handleLogin(...e)),["prevent"]))},[(0,a.Lk)("div",Fe,[t[3]||(t[3]=(0,a.Lk)("label",{for:"email",class:"block mb-2"},"Email",-1)),(0,a.bo)((0,a.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.email=e),required:"",class:"w-full px-3 py-2 border rounded"},null,512),[[o.Jo,s.email]])]),(0,a.Lk)("div",Ue,[t[4]||(t[4]=(0,a.Lk)("label",{for:"password",class:"block mb-2"},"Mot de passe",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>s.password=e),required:"",class:"w-full px-3 py-2 border rounded"},null,512),[[o.Jo,s.password]])]),t[5]||(t[5]=(0,a.Lk)("button",{type:"submit",class:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700"},"Se connecter",-1))],32),(0,a.Lk)("p",Je,[t[7]||(t[7]=(0,a.eW)(" Pas encore de compte ? ")),(0,a.bF)(i,{to:"/register",class:"text-blue-600"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.eW)("S'inscrire")]))),_:1})])])}var He={name:"LoginView",data(){return{email:"",password:""}},methods:{async handleLogin(){try{await p.login(this.email,this.password),this.$router.push("/")}catch(e){console.error("Échec de la connexion",e)}}}};const Be=(0,h.A)(He,[["render",je]]);var qe=Be;const Ye={class:"max-w-md mx-auto mt-10 bg-white p-8 border rounded-lg shadow-lg"},Ne={class:"mb-4"},Qe={class:"mb-4"},ze={class:"mb-6"},Ze={class:"mt-4 text-center"};function Ge(e,t,r,n,s,l){const i=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",Ye,[t[10]||(t[10]=(0,a.Lk)("h2",{class:"text-2xl font-bold mb-6 text-center"},"Inscription",-1)),(0,a.Lk)("form",{onSubmit:t[3]||(t[3]=(0,o.D$)(((...e)=>l.handleRegister&&l.handleRegister(...e)),["prevent"]))},[(0,a.Lk)("div",Ne,[t[4]||(t[4]=(0,a.Lk)("label",{for:"username",class:"block mb-2"},"Nom d'utilisateur",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>s.username=e),required:"",class:"w-full px-3 py-2 border rounded"},null,512),[[o.Jo,s.username]])]),(0,a.Lk)("div",Qe,[t[5]||(t[5]=(0,a.Lk)("label",{for:"email",class:"block mb-2"},"Email",-1)),(0,a.bo)((0,a.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>s.email=e),required:"",class:"w-full px-3 py-2 border rounded"},null,512),[[o.Jo,s.email]])]),(0,a.Lk)("div",ze,[t[6]||(t[6]=(0,a.Lk)("label",{for:"password",class:"block mb-2"},"Mot de passe",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[2]||(t[2]=e=>s.password=e),required:"",class:"w-full px-3 py-2 border rounded"},null,512),[[o.Jo,s.password]])]),t[7]||(t[7]=(0,a.Lk)("button",{type:"submit",class:"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700"},"S'inscrire",-1))],32),(0,a.Lk)("p",Ze,[t[9]||(t[9]=(0,a.eW)(" Déjà un compte ? ")),(0,a.bF)(i,{to:"/login",class:"text-blue-600"},{default:(0,a.k6)((()=>t[8]||(t[8]=[(0,a.eW)("Se connecter")]))),_:1})])])}var et={name:"RegisterView",data(){return{username:"",email:"",password:""}},methods:{async handleRegister(){try{await p.register(this.username,this.email,this.password),this.$router.push("/login")}catch(e){console.error("Échec de l'inscription",e)}}}};const tt=(0,h.A)(et,[["render",Ge]]);var rt=tt;const ot=[{path:"/",component:Ae,meta:{requiresAuth:!0}},{path:"/working-times",component:Pe,meta:{requiresAuth:!0}},{path:"/clock-manager",component:Me,meta:{requiresAuth:!0}},{path:"/login",component:qe},{path:"/register",component:rt}],at=(0,w.aE)({history:(0,w.LA)(),routes:ot});at.beforeEach(((e,t,r)=>{const o=["/login","/register"],a=!o.includes(e.path),n=localStorage.getItem("user");a&&!n?r("/login"):r()}));var nt=at;const st=(0,o.Ef)(v);c.A.interceptors.request.use((e=>{const t=JSON.parse(localStorage.getItem("user"));return t&&t.jwt&&(e.headers["Authorization"]="Bearer "+t.jwt),e}),(e=>Promise.reject(e))),st.use(nt),st.mount("#app")}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,o,a,n){if(!o){var s=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],n=e[u][2];for(var l=!0,i=0;i<o.length;i++)(!1&n||s>=n)&&Object.keys(r.O).every((function(e){return r.O[e](o[i])}))?o.splice(i--,1):(l=!1,n<s&&(s=n));if(l){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,a,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,n,s=o[0],l=o[1],i=o[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(a in l)r.o(l,a)&&(r.m[a]=l[a]);if(i)var u=i(r)}for(t&&t(o);d<s.length;d++)n=s[d],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(u)},o=self["webpackChunkfront"]=self["webpackChunkfront"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[504],(function(){return r(9403)}));o=r.O(o)})();
//# sourceMappingURL=app.84ab7617.js.map